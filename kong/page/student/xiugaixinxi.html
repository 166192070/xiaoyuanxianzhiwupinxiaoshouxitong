<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>用户管理系统</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            success: '#52C41A',
            warning: '#FAAD14',
            danger: '#FF4D4F',
            neutral: '#8C8C8C',
            'neutral-light': '#F5F5F5',
            'neutral-dark': '#434343'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        }
      }
    }
  </script>

  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .card-shadow {
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      }
      .transition-custom {
        transition: all 0.3s ease;
      }
    }
  </style>
</head>
<body class="font-inter bg-gray-50 min-h-screen">
<!-- 顶部导航栏 -->
<header class="bg-white shadow-sm fixed w-full top-0 z-10">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <div class="flex items-center">
        <i class="fa fa-users text-primary text-2xl mr-3"></i>
        <h1 class="text-xl font-semibold text-neutral-dark">用户管理系统</h1>
      </div>

      <div class="flex items-center space-x-4">
        <div class="hidden md:block">
          <span class="text-neutral-dark mr-2">当前角色:</span>
          <span id="current-role" class="px-2 py-1 bg-primary/10 text-primary rounded text-sm font-medium">超级管理员</span>
        </div>

        <div class="relative">
          <button id="user-menu-button" class="flex items-center focus:outline-none">
            <img class="h-8 w-8 rounded-full object-cover" src="https://picsum.photos/id/1005/200/200" alt="用户头像">
            <span class="ml-2 hidden md:block text-neutral-dark">管理员账户</span>
            <i class="fa fa-angle-down ml-1 text-neutral"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- 主内容区 -->
<main class="container mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16">
  <!-- 角色切换器 -->
  <div class="mb-8 bg-white p-4 rounded-lg card-shadow">
    <h2 class="text-lg font-medium text-neutral-dark mb-4">角色切换（演示用）</h2>
    <div class="flex flex-wrap gap-4">
      <button id="super-admin-btn" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-custom flex items-center">
        <i class="fa fa-shield mr-2"></i>超级管理员
      </button>
      <button id="admin-btn" class="px-4 py-2 bg-gray-200 text-neutral-dark rounded-md hover:bg-gray-300 transition-custom flex items-center">
        <i class="fa fa-user-secret mr-2"></i>普通管理员
      </button>
      <button id="user-btn" class="px-4 py-2 bg-gray-200 text-neutral-dark rounded-md hover:bg-gray-300 transition-custom flex items-center">
        <i class="fa fa-user mr-2"></i>普通用户（师生）
      </button>
    </div>
  </div>

  <!-- 用户列表 -->
  <div class="bg-white rounded-lg card-shadow overflow-hidden mb-8">
    <div class="p-6 border-b border-gray-100">
      <h2 class="text-xl font-semibold text-neutral-dark">用户列表</h2>
      <p class="text-neutral mt-1">根据您的权限，您可以管理或编辑用户信息</p>
    </div>

    <div class="p-6">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
        <div class="relative w-full md:w-64 mb-4 md:mb-0">
          <input type="text" placeholder="搜索用户..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
          <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral"></i>
        </div>

        <button id="add-user-btn" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-custom flex items-center justify-center">
          <i class="fa fa-plus mr-2"></i>添加用户
        </button>
      </div>

      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-neutral-light">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-dark uppercase tracking-wider">用户名</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-dark uppercase tracking-wider">角色</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-dark uppercase tracking-wider">状态</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-dark uppercase tracking-wider">手机</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-dark uppercase tracking-wider">QQ</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-neutral-dark uppercase tracking-wider">常用自提点</th>
            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-neutral-dark uppercase tracking-wider">操作</th>
          </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
          <!-- 用户1 -->
          <tr class="hover:bg-gray-50 transition-custom">
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex items-center">
                <img class="h-8 w-8 rounded-full object-cover" src="https://picsum.photos/id/1012/200/200" alt="张三头像">
                <div class="ml-3">
                  <div class="text-sm font-medium text-neutral-dark">张三</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 py-1 text-xs rounded-full bg-primary/10 text-primary">超级管理员</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 py-1 text-xs rounded-full bg-success/10 text-success">正常</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">138****5678</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">123456</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">主校区南门</td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <button class="text-primary hover:text-primary/80 mr-3 edit-user" data-id="1">编辑</button>
            </td>
          </tr>

          <!-- 用户2 -->
          <tr class="hover:bg-gray-50 transition-custom">
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex items-center">
                <img class="h-8 w-8 rounded-full object-cover" src="https://picsum.photos/id/1027/200/200" alt="李四头像">
                <div class="ml-3">
                  <div class="text-sm font-medium text-neutral-dark">李四</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 py-1 text-xs rounded-full bg-secondary/10 text-secondary">普通管理员</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 py-1 text-xs rounded-full bg-success/10 text-success">正常</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">139****8765</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">654321</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">东校区西门</td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <button class="text-primary hover:text-primary/80 mr-3 edit-user" data-id="2">编辑</button>
            </td>
          </tr>

          <!-- 用户3 -->
          <tr class="hover:bg-gray-50 transition-custom">
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex items-center">
                <img class="h-8 w-8 rounded-full object-cover" src="https://picsum.photos/id/1025/200/200" alt="王五头像">
                <div class="ml-3">
                  <div class="text-sm font-medium text-neutral-dark">王五</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 py-1 text-xs rounded-full bg-neutral/10 text-neutral">普通用户</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 py-1 text-xs rounded-full bg-success/10 text-success">正常</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">135****1234</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">987654</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">南校区北门</td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <button class="text-primary hover:text-primary/80 mr-3 edit-user" data-id="3">编辑</button>
              <button class="text-danger hover:text-danger/80 admin-action" data-id="3">停用</button>
            </td>
          </tr>

          <!-- 用户4 -->
          <tr class="hover:bg-gray-50 transition-custom">
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex items-center">
                <img class="h-8 w-8 rounded-full object-cover" src="https://picsum.photos/id/1062/200/200" alt="赵六头像">
                <div class="ml-3">
                  <div class="text-sm font-medium text-neutral-dark">赵六</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 py-1 text-xs rounded-full bg-neutral/10 text-neutral">普通用户</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 py-1 text-xs rounded-full bg-danger/10 text-danger">已停用</span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">136****4321</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">456789</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-dark">西校区东门</td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <button class="text-primary hover:text-primary/80 mr-3 edit-user" data-id="4">编辑</button>
              <button class="text-success hover:text-success/80 admin-action" data-id="4">启用</button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- 分页 -->
      <div class="flex justify-between items-center mt-6">
        <div class="text-sm text-neutral">
          显示 1 到 4 条，共 4 条
        </div>
        <div class="flex space-x-1">
          <button class="px-3 py-1 border border-gray-200 rounded-md text-neutral bg-white hover:bg-gray-50 disabled:opacity-50" disabled>
            <i class="fa fa-angle-left"></i>
          </button>
          <button class="px-3 py-1 border border-primary bg-primary text-white rounded-md">1</button>
          <button class="px-3 py-1 border border-gray-200 rounded-md text-neutral bg-white hover:bg-gray-50 disabled:opacity-50" disabled>
            <i class="fa fa-angle-right"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- 页脚 -->
<footer class="bg-white border-t border-gray-200 py-6">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center text-neutral text-sm">
      © 2023 用户管理系统 - 版权所有
    </div>
  </div>
</footer>

<!-- 编辑用户模态框 -->
<div id="edit-user-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
  <div class="bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto">
    <div class="p-6 border-b border-gray-100 flex justify-between items-center sticky top-0 bg-white z-10">
      <h3 class="text-lg font-semibold text-neutral-dark">编辑用户信息</h3>
      <button id="close-modal-btn" class="text-neutral hover:text-neutral-dark transition-custom">
        <i class="fa fa-times text-xl"></i>
      </button>
    </div>

    <div class="p-6">
      <form id="edit-user-form">
        <input type="hidden" id="user-id">

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label for="username" class="block text-sm font-medium text-neutral-dark mb-1">用户名</label>
            <input type="text" id="username" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" disabled>
          </div>

          <div class="admin-only">
            <label for="user-role" class="block text-sm font-medium text-neutral-dark mb-1">用户角色</label>
            <select id="user-role" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
              <option value="super_admin">超级管理员</option>
              <option value="admin">普通管理员</option>
              <option value="user">普通用户（师生）</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div class="admin-only">
            <label for="user-status" class="block text-sm font-medium text-neutral-dark mb-1">用户状态</label>
            <select id="user-status" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
              <option value="active">正常</option>
              <option value="inactive">已停用</option>
            </select>
          </div>

          <div>
            <label for="phone" class="block text-sm font-medium text-neutral-dark mb-1">手机号码</label>
            <input type="tel" id="phone" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label for="qq" class="block text-sm font-medium text-neutral-dark mb-1">QQ号码</label>
            <input type="text" id="qq" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
          </div>

          <div>
            <label for="pickup-point" class="block text-sm font-medium text-neutral-dark mb-1">常用自提点</label>
            <select id="pickup-point" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
              <option value="main_south">主校区南门</option>
              <option value="east_west">东校区西门</option>
              <option value="south_north">南校区北门</option>
              <option value="west_east">西校区东门</option>
              <option value="other">其他</option>
            </select>
          </div>
        </div>

        <div class="mb-6">
          <label for="password" class="block text-sm font-medium text-neutral-dark mb-1">
            密码
            <span class="text-neutral text-xs">(不修改请留空)</span>
          </label>
          <input type="password" id="password" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="输入新密码">
        </div>

        <div class="flex justify-end space-x-3">
          <button type="button" id="cancel-edit-btn" class="px-4 py-2 border border-gray-200 text-neutral-dark rounded-md hover:bg-gray-50 transition-custom">取消</button>
          <button type="submit" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-custom">保存修改</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- 通知提示 -->
<div id="notification" class="fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg transform translate-x-full transition-all duration-300 z-50 flex items-center">
  <i id="notification-icon" class="mr-2 text-xl"></i>
  <span id="notification-message"></span>
</div>

<script>
  // 当前角色状态
  let currentRole = 'super_admin'; // 默认超级管理员

  // DOM元素
  const superAdminBtn = document.getElementById('super-admin-btn');
  const adminBtn = document.getElementById('admin-btn');
  const userBtn = document.getElementById('user-btn');
  const currentRoleEl = document.getElementById('current-role');
  const editUserBtns = document.querySelectorAll('.edit-user');
  const adminActionBtns = document.querySelectorAll('.admin-action');
  const editUserModal = document.getElementById('edit-user-modal');
  const closeModalBtn = document.getElementById('close-modal-btn');
  const cancelEditBtn = document.getElementById('cancel-edit-btn');
  const editUserForm = document.getElementById('edit-user-form');
  const notification = document.getElementById('notification');
  const notificationIcon = document.getElementById('notification-icon');
  const notificationMessage = document.getElementById('notification-message');
  const adminOnlyFields = document.querySelectorAll('.admin-only');
  const addUserBtn = document.getElementById('add-user-btn');

  // 角色切换
  superAdminBtn.addEventListener('click', () => {
    setRole('super_admin');
  });

  adminBtn.addEventListener('click', () => {
    setRole('admin');
  });

  userBtn.addEventListener('click', () => {
    setRole('user');
  });

  // 设置角色并更新界面
  function setRole(role) {
    currentRole = role;

    // 更新按钮样式
    superAdminBtn.className = role === 'super_admin'
      ? 'px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-custom flex items-center'
      : 'px-4 py-2 bg-gray-200 text-neutral-dark rounded-md hover:bg-gray-300 transition-custom flex items-center';

    adminBtn.className = role === 'admin'
      ? 'px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-custom flex items-center'
      : 'px-4 py-2 bg-gray-200 text-neutral-dark rounded-md hover:bg-gray-300 transition-custom flex items-center';

    userBtn.className = role === 'user'
      ? 'px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-custom flex items-center'
      : 'px-4 py-2 bg-gray-200 text-neutral-dark rounded-md hover:bg-gray-300 transition-custom flex items-center';

    // 更新角色显示
    switch(role) {
      case 'super_admin':
        currentRoleEl.textContent = '超级管理员';
        currentRoleEl.className = 'px-2 py-1 bg-primary/10 text-primary rounded text-sm font-medium';
        break;
      case 'admin':
        currentRoleEl.textContent = '普通管理员';
        currentRoleEl.className = 'px-2 py-1 bg-secondary/10 text-secondary rounded text-sm font-medium';
        break;
      case 'user':
        currentRoleEl.textContent = '普通用户（师生）';
        currentRoleEl.className = 'px-2 py-1 bg-neutral/10 text-neutral rounded text-sm font-medium';
        break;
    }

    // 根据角色显示/隐藏管理功能
    updateRolePermissions();

    showNotification('success', `已切换为${currentRoleEl.textContent}`);
  }

  // 根据角色更新权限显示
  function updateRolePermissions() {
    // 管理员专用字段
    adminOnlyFields.forEach(field => {
      if (currentRole === 'user') {
        field.style.display = 'none';
      } else {
        field.style.display = 'block';
      }
    });

    // 管理员操作按钮（停用/启用）
    adminActionBtns.forEach(btn => {
      if (currentRole === 'user') {
        btn.style.display = 'none';
      } else {
        btn.style.display = 'inline-block';
      }
    });

    // 添加用户按钮
    if (currentRole === 'user') {
      addUserBtn.style.display = 'none';
    } else {
      addUserBtn.style.display = 'flex';
    }
  }

  // 打开编辑用户模态框
  editUserBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const userId = btn.getAttribute('data-id');
      openEditModal(userId);
    });
  });

  // 打开编辑模态框并填充数据
  function openEditModal(userId) {
    // 这里应该是从服务器获取用户数据，这里模拟数据
    const users = {
      '1': {
        id: 1,
        username: '张三',
        role: 'super_admin',
        status: 'active',
        phone: '13800005678',
        qq: '123456',
        pickupPoint: 'main_south'
      },
      '2': {
        id: 2,
        username: '李四',
        role: 'admin',
        status: 'active',
        phone: '13900008765',
        qq: '654321',
        pickupPoint: 'east_west'
      },
      '3': {
        id: 3,
        username: '王五',
        role: 'user',
        status: 'active',
        phone: '13500001234',
        qq: '987654',
        pickupPoint: 'south_north'
      },
      '4': {
        id: 4,
        username: '赵六',
        role: 'user',
        status: 'inactive',
        phone: '13600004321',
        qq: '456789',
        pickupPoint: 'west_east'
      }
    };

    const user = users[userId];
    if (!user) return;

    // 填充表单数据
    document.getElementById('user-id').value = user.id;
    document.getElementById('username').value = user.username;
    document.getElementById('user-role').value = user.role;
    document.getElementById('user-status').value = user.status;
    document.getElementById('phone').value = user.phone;
    document.getElementById('qq').value = user.qq;
    document.getElementById('pickup-point').value = user.pickupPoint;
    document.getElementById('password').value = '';

    // 对于普通用户，限制只能编辑自己的信息
    if (currentRole === 'user' && userId !== '3') { // 假设当前普通用户是ID=3的王五
      showNotification('error', '普通用户只能编辑本人信息');
      return;
    }

    // 显示模态框
    editUserModal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  // 关闭模态框
  function closeModal() {
    editUserModal.classList.add('hidden');
    document.body.style.overflow = 'auto';
  }

  closeModalBtn.addEventListener('click', closeModal);
  cancelEditBtn.addEventListener('click', closeModal);

  // 点击模态框外部关闭
  editUserModal.addEventListener('click', (e) => {
    if (e.target === editUserModal) {
      closeModal();
    }
  });

  // 提交编辑表单
  editUserForm.addEventListener('submit', (e) => {
    e.preventDefault();

    // 收集表单数据
    const formData = {
      id: document.getElementById('user-id').value,
      username: document.getElementById('username').value,
      role: document.getElementById('user-role').value,
      status: document.getElementById('user-status').value,
      phone: document.getElementById('phone').value,
      qq: document.getElementById('qq').value,
      pickupPoint: document.getElementById('pickup-point').value,
      password: document.getElementById('password').value
    };

    // 这里应该发送到服务器处理
    console.log('提交的用户数据:', formData);

    closeModal();
    showNotification('success', '用户信息已更新');
  });

  // 管理员操作（停用/启用）
  adminActionBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      if (currentRole === 'user') return;

      const userId = btn.getAttribute('data-id');
      const action = btn.textContent;

      if (confirm(`确定要${action}该用户吗？`)) {
        // 这里应该发送到服务器处理
        console.log(`${action}用户 ID:`, userId);

        // 切换按钮文本
        if (action === '停用') {
          btn.textContent = '启用';
          btn.className = 'text-success hover:text-success/80 admin-action';
          // 更新状态标签（实际应用中应该从DOM找到对应元素）
        } else {
          btn.textContent = '停用';
          btn.className = 'text-danger hover:text-danger/80 admin-action';
          // 更新状态标签
        }

        showNotification('success', `用户已${action}`);
      }
    });
  });

  // 添加用户按钮
  addUserBtn.addEventListener('click', () => {
    if (currentRole === 'user') return;

    // 清空表单
    document.getElementById('user-id').value = '';
    document.getElementById('username').value = '';
    document.getElementById('user-role').value = 'user';
    document.getElementById('user-status').value = 'active';
    document.getElementById('phone').value = '';
    document.getElementById('qq').value = '';
    document.getElementById('pickup-point').value = 'main_south';
    document.getElementById('password').value = '';

    // 显示模态框，修改标题
    document.querySelector('#edit-user-modal h3').textContent = '添加新用户';
    editUserModal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  });

  // 显示通知
  function showNotification(type, message) {
    notificationMessage.textContent = message;

    if (type === 'success') {
      notification.className = 'fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg transform translate-x-0 transition-all duration-300 z-50 flex items-center bg-success/10 text-success border border-success/20';
      notificationIcon.className = 'mr-2 text-xl fa fa-check-circle';
    } else if (type === 'error') {
      notification.className = 'fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg transform translate-x-0 transition-all duration-300 z-50 flex items-center bg-danger/10 text-danger border border-danger/20';
      notificationIcon.className = 'mr-2 text-xl fa fa-exclamation-circle';
    } else if (type === 'warning') {
      notification.className = 'fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg transform translate-x-0 transition-all duration-300 z-50 flex items-center bg-warning/10 text-warning border border-warning/20';
      notificationIcon.className = 'mr-2 text-xl fa fa-exclamation-triangle';
    }

    // 3秒后隐藏通知
    setTimeout(() => {
      notification.className = 'fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg transform translate-x-full transition-all duration-300 z-50 flex items-center';
    }, 3000);
  }

  // 初始化权限
  updateRolePermissions();
</script>
</body>
</html>
